var xsso=function(e){"use strict";function n(e,n,t){if(t||2===arguments.length)for(var r,o=0,i=n.length;o<i;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return e.concat(r||Array.prototype.slice.call(n))}var t,r,o=function(){return window},i=function(){return document};!function(e){e.Init="init",e.Set="set",e.Unchanged="unchanged",e.PollAborted="poll_aborted",e.LoginRequired="login_required",e.Limited="limited"}(t||(t={})),function(e){e.NotFound="not_found",e.Unsupported="unsupported",e.Changed="changed",e.Error="error",e.LoginPendingExpiry="login_pending_expiry",e.Polling="polling",e.Loaded="loaded",e.Login="login",e.Refresh="refresh",e.InvalidOrigin="invalid_origin",e.TooSoon="too_soon"}(r||(r={}));var u=Object.values(t).reduce((function(e,n){return e[n]=!0,e}),{}),a=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return function(n){try{n.apply(void 0,e)}catch(e){console.error(e)}}},c=t.Init,l=function(){return c},s=[],f=function(e){return s.forEach(a("error",e))},d=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];u[e]&&(c=e),s.forEach(a.apply(void 0,n([e],t)))},p=function(e){return i().querySelector(e)},g=function(e,n,t){return e.setAttribute(n,t)};var h=function(){return p("body")};function y(e,n){var t,r,o=p("#"+e);return o&&(null===(r=(t=o).parentElement)||void 0===r||r.removeChild(t)),(o=function(){var e=i().createElement("iframe");return g(e,"frameborder","0"),g(e,"width","0"),g(e,"height","0"),g(e,"style","display:block; visibility:hidden; height:0; width:0; left:0; top:0; position:absolute; opacity:0"),e}()).id=e,o.src=null!=n?n:"about:blank",o}function v(e,n){e.onload=function(){e.onload=null,setTimeout((function(){return n(e)}),0)}}function _(e,n,t){var r;null===(r=e.contentWindow)||void 0===r||r.postMessage(n,t)}function m(e){var n=e.cookie.split("; ").map((function(e){return e.split("=")}));return Object.fromEntries(n)}function b(){try{var e=m(i())["__Secure-id_hint"];if(e){var n=JSON.parse(decodeURIComponent(e));if("object"==typeof n&&null!==n)return n}}catch(e){f(e)}}function k(){try{return!!m(i())["__Secure-refresh_token_presence"]}catch(e){f(e)}return!1}function L(e){var n=e.origin+"riot-owned-iframe",t=y("riot-owned",n),r="login"===e.type?"prompt=none&response_type=code&client_id="+e.client_id+"&scope="+e.scope:"refresh";return v(t,(function(){return _(t,r,n)})),h().append(t),t}var w,E,S,x,O,P,R,U;function j(){l()!==t.Limited?L({origin:E,type:"login",client_id:x,scope:S}):d(t.Limited,"iframe login attempt skipped due to blocked third party cookies")}function I(){d(r.Polling);var e=p("#check-session");if(e){var n=function(){try{var e=m(i())["__Secure-session_state"];if(e)return decodeURIComponent(e)}catch(e){f(e)}}();if(n){var o=function(){try{var e=m(i())["__Secure-session_expiry"];if(e)return decodeURIComponent(e)}catch(e){f(e)}}();if(o){if(Date.parse(o)<Date.now()+O)return void(P?(d(r.LoginPendingExpiry,"tokens about to expire, automatically trying to refresh"),L({origin:E,type:"refresh"})):d(t.LoginRequired,"pending token expiry detected"))}else if(P&&k())return d(r.LoginPendingExpiry,"Missing access token while refresh token available, automatically trying to refresh"),void L({origin:E,type:"refresh"});_(e,x+" "+n,E)}else j()}else d(t.PollAborted,"missing iframe")}function q(){void 0!==R&&clearTimeout(R),R=o().setTimeout(I,w)}function A(){b()?(d(t.Limited,"known but unable to poll session or login through iframe"),q()):k()?(d(r.LoginPendingExpiry,"Missing id hint while refresh token available, automatically trying to refresh"),L({origin:E,type:"refresh"})):d(t.LoginRequired,"unknown to local domain and unknown to issuer")}function N(e){return"string"==typeof e}function C(e){var n=e.automatic_refresh_enabled,t=e.token_expiry_buffer,r=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)n.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(t[r[o]]=e[r[o]])}return t}(e,["automatic_refresh_enabled","token_expiry_buffer"]);if(N(n)?r.automatic_refresh_enabled="true"===n:"boolean"==typeof n&&(r.automatic_refresh_enabled=n),N(t)){var o=Number.parseInt(t,10);Number.isNaN(o)||(r.token_expiry_buffer=o)}else"number"==typeof t&&(r.token_expiry_buffer=O);return r}return e.REFRESH_MESSAGE_KEY="refresh",e.attemptLoginPromptNone=j,e.handleUnsupported=A,e.id=function(){var e=l();if(e===t.Set||e===t.Unchanged||e===t.Limited)return b()},e.init=function(e){var i,u,a,c,l=C(e);E=new URL(l.origin).toString(),x=l.client_id,w=null!==(i=l.interval)&&void 0!==i?i:15e3,O=null!==(u=l.token_expiry_buffer)&&void 0!==u?u:6e4,P=null!==(a=l.automatic_refresh_enabled)&&void 0!==a&&a,S=null!==(c=l.scope)&&void 0!==c?c:"openid account offline_access";var s,p,g,_={not_found:function(){return d(t.LoginRequired,"unknown to issuer")},unsupported:A,unchanged:q,set:q,changed:j,error:function(){return d(t.PollAborted,"unknown error in check-session iframe")},too_soon:q};void 0!==U&&o().removeEventListener("message",U,!1),s=E,p=function(e){var t="XSSO::";if(e.startsWith(t)){e=e.slice(t.length);var r,o,i=-1!==(o=(r=e).indexOf(" "))?[r.slice(0,o),r.slice(o+1)]:[r],u=i[0],a=i.slice(1);u in _&&_[u](),d.apply(void 0,n([u],a))}},g=function(e){try{var n=e,t=n.data,r=n.origin;new URL(r).toString()===s&&"string"==typeof t&&p(t)}catch(e){f(e)}},o().addEventListener("message",g,!1),U=g,function(e){var n=e+"check-session-iframe",t=y("check-session",n);v(t,(function(){d(r.Loaded,n)})),h().append(t)}(E)},e.onEvent=function(e){return s.push(e)},e.parseSafeOptions=C,e.poll=I,e.requestPoll=q,e.state=l,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
//# sourceMappingURL=xsso.min.js.map
;xsso.onEvent(type => type === 'loaded' && xsso.poll());xsso.init({client_id:'prod-xsso-leagueoflegends',origin:'https://xsso.leagueoflegends.com',issuer:'https://auth.riotgames.com',scope:'openid account email offline_access',token_expiry_buffer:'60000',automatic_refresh_enabled:'true'});